// core instruction loop and opcode logic